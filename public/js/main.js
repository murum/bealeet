var FlashMessage={};FlashMessage.config={messageContainer:$("div#messages-container")},FlashMessage.show=function(e,s){var a=document.createElement("div");a=$(a),a.addClass("alert").addClass("alert-"+s),a.append(e),FlashMessage.config.messageContainer.append(a),a.delay(4e3).fadeOut(1e3)},FlashMessage.success=function(e){FlashMessage.show(e,"success")},FlashMessage.error=function(e){FlashMessage.show(e,"danger")},FlashMessage.info=function(e){FlashMessage.show(e,"info")},window.fbAsyncInit=function(){FB.init({appId:"671187556307321",xfbml:!0,version:"v2.1"})};var Bealeet={};Bealeet.toggle={init:function(){$(".dropdown a.dropdown-toggle").on("click",this.toggleDropdown),$(".dropdown a.dropdown-close").on("click",this.hideDropdown),$("button.user-profile-subheader-games-add-button").on("click",this.toggleAddGameDropdown),$("button.user-profile-skills-add-button").on("click",this.toggleAddSkillDropdown)},toggleDropdown:function(e){e.preventDefault(),$(this).closest(".dropdown").toggleClass("open")},hideDropdown:function(e){e.preventDefault(),$(this).closest(".dropdown").removeClass("open")},toggleAddGameDropdown:function(e){e.preventDefault(),$(this).closest(".user-profile-subheader-games-add").toggleClass("open")},toggleAddSkillDropdown:function(e){e.preventDefault(),$(this).closest(".user-profile-skills-add").toggleClass("open")}},Bealeet.chosen={init:function(){$("div.user-profile-subheader-games-add select.chosen-list").chosen({width:"100%"}).change(this.userChangeGames),$("div.user-profile-skills-add select.chosen-list").chosen({width:"100%"}).change(this.userChangeSkills)},userChangeGames:function(e,s){var a=$(this).closest("form"),t=a.attr("action");$.ajax({url:t,type:"put",dataType:"json",data:s,success:function(e){FlashMessage.success(e.message)},error:function(e){var e=$.parseJSON(e.responseText);e.message?FlashMessage.error(e.message):FlashMessage.error(e.error.message)}})},userChangeSkills:function(e,s){var a=$(this).closest("form"),t=a.attr("action");s.deselected?swal({title:"Are you sure?",text:"When you remove a skill you will also lose all your points for the specific skill.!",type:"warning",showCancelButton:!0,confirmButtonColor:"#45c54b",confirmButtonText:"Yes, remove skill!",cancelButtonText:"Regret",closeOnConfirm:!0,closeOnCancel:!0},function(e){return e?($.ajax({url:t,type:"put",dataType:"json",data:s,success:function(e){FlashMessage.success(e.message)},error:function(e){var e=$.parseJSON(e.responseText);e.message?FlashMessage.error(e.message):FlashMessage.error(e.error.message)}}),void 0):!1}):$.ajax({url:t,type:"put",dataType:"json",data:s,success:function(e){FlashMessage.success(e.message)},error:function(e){var e=$.parseJSON(e.responseText);e.message?FlashMessage.error(e.message):FlashMessage.error(e.error.message)}})}},Bealeet.switcher={init:function(){$("input#user-profile-searching-switcher").on("change",this.userChangeSearchStatus)},userChangeSearchStatus:function(){var e=$(this).closest("form"),s=e.attr("action"),a=$(this).prop("checked");$.ajax({url:s,type:"put",dataType:"json",data:{isSearching:a},success:function(e){FlashMessage.success(e.message)},error:function(e){var e=$.parseJSON(e.responseText);e.message?FlashMessage.error(e.message):FlashMessage.error(e.error.message)}})}},Bealeet.selectpicker={init:function(){$("select.selectpicker").selectpicker(),$("div.user-profile-subheader-games-primary select").selectpicker().on("change",this.userChangePrimaryGame)},userChangePrimaryGame:function(){var e=$(this).closest("form"),s=e.attr("action"),a=$(this).val();$.ajax({url:s,type:"put",dataType:"json",data:{favoriteGameId:a},success:function(e){FlashMessage.success(e.message)},error:function(e){var e=$.parseJSON(e.responseText);e.message?FlashMessage.error(e.message):FlashMessage.error(e.error.message)}})}},Bealeet.skills={init:function(){$(".btn-testify-skill").on("click",this.addSkillPoint)},addSkillPoint:function(){var e=$(this),s=e.closest("form"),a=s.attr("action"),t=e.closest(".user-profile-skills-item"),r=t.data("skill");$.ajax({url:a,type:"post",dataType:"json",data:{skillId:r},success:function(e){s.remove(),t.removeClass("plusable"),t.attr("data-amount",parseInt(t.data("amount"))+1),FlashMessage.success(e.message)},error:function(e){var e=$.parseJSON(e.responseText);e.message?FlashMessage.error(e.message):FlashMessage.error(e.error.message)}})}},$(function(){Bealeet.toggle.init(),Bealeet.chosen.init(),Bealeet.selectpicker.init(),Bealeet.switcher.init(),Bealeet.skills.init()});